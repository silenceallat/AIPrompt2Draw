# AIPrompt2Draw 使用指南

## 📖 目录

- [快速开始](#快速开始)
- [API配置](#api配置)
- [提示词技巧](#提示词技巧)
- [图表类型](#图表类型)
- [高级功能](#高级功能)
- [常见问题](#常见问题)
- [故障排除](#故障排除)

## 🚀 快速开始

### 第一步：打开应用

1. **在线使用**：访问演示链接即可直接使用
2. **本地使用**：下载项目后，双击 `src/index.html` 文件

### 第二步：配置API

1. 点击右上角的 **⚙️ 设置** 按钮
2. 选择你的AI服务商（推荐新手使用硅基流动）
3. 输入API密钥
4. 选择合适的模型
5. 点击 **保存配置**

### 第三步：开始创作

1. 在右侧对话框中输入你的需求
2. 点击发送或按回车键
3. 等待AI生成图表
4. 图表会自动加载到左侧编辑器

## ⚙️ API配置详解

### 推荐服务商

#### 1. 硅基流动 (Siliconflow) ⭐ 推荐
- **优点**：国产服务，稳定快速，价格优惠
- **适用人群**：国内用户，新手推荐
- **获取密钥**：[siliconflow.cn](https://siliconflow.cn/)
- **推荐模型**：
  - `zai-org/GLM-4.6` - 综合性能最佳
  - `deepseek-ai/DeepSeek-V3.2-Exp` - 逻辑推理强

#### 2. OpenRouter
- **优点**：模型丰富，支持多种AI服务
- **适用人群**：需要特定模型的用户
- **获取密钥**：[openrouter.ai](https://openrouter.ai/)
- **推荐模型**：
  - `anthropic/claude-sonnet-4.5` - 理解能力强
  - `openai/gpt-4o` - 综合性能优秀

#### 3. Kimi (Moonshot)
- **优点**：长文本处理能力强
- **适用人群**：需要处理复杂描述的用户
- **获取密钥**：[kimi.moonshot.cn](https://kimi.moonshot.cn/)
- **推荐模型**：
  - `kimi-k2-thinking` - 推理能力强

#### 4. 智谱GLM
- **优点**：中文理解优秀
- **适用人群**：中文用户
- **获取密钥**：[open.bigmodel.cn](https://open.bigmodel.cn/)
- **推荐模型**：
  - `glm-4.6` - 最新版本

### 配置步骤详解

1. **选择服务商**
   - 根据你的需求和预算选择合适的服务商
   - 新手建议从硅基流动开始

2. **获取API密钥**
   - 访问服务商官网
   - 注册账号并完成实名认证
   - 在控制台创建API密钥

3. **配置参数**
   ```
   API服务商：选择你注册的服务商
   API Key：粘贴你的密钥
   API 地址：通常自动填充，自定义服务商需手动输入
   模型选择：选择支持的模型
   流式输出：建议开启，实时查看生成过程
   ```

4. **测试连接**
   - 保存配置后，状态显示会更新为"已配置"
   - 发送一条测试消息确认连接正常

## 💡 提示词技巧

### 基础格式

好的提示词通常包含：
- **图表类型**：流程图、架构图、UML图等
- **主要元素**：包含哪些步骤或组件
- **连接关系**：元素之间的关联
- **样式要求**：可选的颜色、布局要求

### 流程图示例

#### 简单流程
```
创建一个登录流程图：用户输入用户名密码 → 验证信息 → 登录成功/失败
```

#### 带判断的流程
```
画一个请假审批流程：
1. 员工提交请假申请
2. 部门经理审批（3天以内直接通过，超过3天需要总经理审批）
3. 人事部门备案
4. 发送审批结果通知
```

### 架构图示例

#### 系统架构
```
设计一个电商系统架构图：
前端：Web应用、移动App
网关层：API Gateway、负载均衡
服务层：用户服务、商品服务、订单服务、支付服务
数据层：MySQL、Redis、MongoDB
```

#### 微服务架构
```
创建一个微服务架构图：
客户端 → Nginx网关 → 用户认证服务 → 业务服务群 → 数据库集群
包含监控、日志、配置中心等支撑服务
```

### UML图示例

#### 类图
```
设计一个用户管理系统的UML类图：
包含用户类(User)、角色类(Role)、权限类(Permission)
用户和角色多对多关系，角色和权限多对多关系
```

#### 时序图
```
画一个用户下单的时序图：
用户 → 前端 → 后端API → 订单服务 → 库存服务 → 支付服务
展示各组件之间的调用顺序和时间关系
```

### 高级技巧

#### 1. 指定样式
```
创建一个流程图，使用绿色表示成功路径，红色表示失败路径
矩形框表示处理步骤，菱形表示判断条件
```

#### 2. 指定布局
```
设计一个从左到右的横向流程图：开始 → 数据输入 → 处理 → 输出 → 结束
使用清晰的箭头连接，保持适当的间距
```

#### 3. 复杂业务流程
```
创建一个完整的电商购物流程：
用户浏览商品 → 加入购物车 → 确认订单 → 选择地址 → 选择支付方式 → 支付 → 订单确认 → 发货 → 收货确认 → 评价
每个步骤都要包含详细的处理逻辑和可能的异常情况
```

## 📊 图表类型详解

### 1. 流程图 (Flowchart)

**用途**：展示业务流程、操作步骤

**常用元素**：
- 矩形：处理步骤
- 菱形：判断条件
- 圆角矩形：开始/结束
- 箭头：流程方向

**示例场景**：
- 审批流程
- 业务流程
- 算法流程

### 2. 架构图 (Architecture Diagram)

**用途**：展示系统结构、组件关系

**常用元素**：
- 立方体：数据库
- 圆柱：存储系统
- 云朵：云服务
- 矩形：应用服务

**示例场景**：
- 系统架构
- 网络拓扑
- 微服务架构

### 3. UML图 (UML Diagram)

**用途**：软件建模、设计展示

**类型**：
- 类图：展示类和关系
- 时序图：展示交互时序
- 用例图：展示功能需求
- 状态图：展示状态转换

### 4. 组织结构图

**用途**：展示层级关系、组织结构

**常用元素**：
- 矩形：部门/职位
- 连线：汇报关系
- 颜色：不同级别或类型

## 🔧 高级功能

### 1. 历史对话管理

**开启历史对话**：
- 保持上下文连续性
- 支持多轮对话修改
- 消耗更多Tokens

**关闭历史对话**：
- 节省API成本
- 每次对话独立
- 适合简单需求

**切换方法**：
在输入框上方找到"携带历史对话"开关，根据需要开启或关闭。

### 2. 配置导入导出

**导出配置**：
1. 打开设置面板
2. 点击"导出配置"按钮
3. 保存配置文件到本地

**导入配置**：
1. 在新设备上打开应用
2. 打开设置面板
3. 点击"导入配置"按钮
4. 选择之前保存的配置文件

**用途**：
- 多设备同步配置
- 备份重要设置
- 团队配置共享

### 3. 主题切换

**明暗主题**：
- 明亮主题：适合白天使用
- 深色主题：适合夜间使用，保护眼睛

**切换方法**：
点击右上角的主题切换按钮（☀️/🌙）

### 4. XML代码操作

**复制XML**：
- 点击"📋 复制XML"按钮
- 粘贴到其他DrawIO实例
- 或用于版本控制

**手动导入**：
1. 打开diagrams.net
2. 文件 → 导入 → 从文本
3. 粘贴XML代码
4. 点击导入

## ❓ 常见问题

### Q1: 为什么图表没有自动加载？

**可能原因**：
- DrawIO编辑器还在初始化中
- 网络连接问题
- XML格式错误

**解决方法**：
1. 等待几秒钟后重试"重新加载"
2. 使用"📋 复制XML"手动导入
3. 检查网络连接

### Q2: API调用失败怎么办？

**检查步骤**：
1. 确认API密钥正确
2. 检查网络连接
3. 验证服务商配置
4. 查看API余额

**解决方法**：
1. 重新配置API密钥
2. 尝试切换其他服务商
3. 检查服务商服务状态

### Q3: 生成的图表不够理想？

**优化提示词**：
1. 更详细地描述需求
2. 指定具体的样式要求
3. 提供参考示例
4. 分步骤描述复杂流程

**示例改进**：
```
之前：创建一个登录流程
现在：创建一个用户登录验证流程图，包含以下步骤：
1. 用户输入用户名和密码
2. 系统验证用户信息
3. 验证成功则跳转到主页，失败则显示错误信息
4. 提供"忘记密码"链接
使用蓝色系配色，矩形框表示处理步骤，菱形表示判断条件
```

### Q4: Tokens消耗过快？

**优化方法**：
1. 关闭"携带历史对话"
2. 使用简洁的提示词
3. 选择更经济的模型
4. 避免重复生成

**建议模型**：
- 硅基流动：性价比高
- 智谱GLM：中文优化
- OpenRouter：模型选择灵活

### Q5: 如何保存和管理图表？

**保存方法**：
1. 在DrawIO编辑器中：文件 → 保存
2. 导出为图片：文件 → 导出 → PNG/SVG
3. 导出为XML：文件 → 导出 → XML

**管理建议**：
1. 定期导出重要图表
2. 使用云存储备份
3. 建立文件命名规范

## 🔧 故障排除

### 常见错误及解决方案

#### 1. "API Key未配置"错误
**症状**：状态显示"Key未配置"，无法发送消息

**解决方案**：
1. 点击右上角⚙️设置按钮
2. 选择正确的服务商
3. 输入有效的API密钥
4. 点击"保存配置"

#### 2. "网络连接失败"错误
**症状**：消息发送后长时间无响应

**解决方案**：
1. 检查网络连接
2. 尝试刷新页面
3. 切换到其他服务商
4. 检查服务商服务状态

#### 3. "DrawIO加载失败"问题
**症状**：左侧编辑器显示空白或错误

**解决方案**：
1. 等待DrawIO完全加载
2. 尝试刷新页面
3. 使用"复制XML"功能手动导入
4. 检查浏览器控制台错误信息

#### 4. "XML格式错误"问题
**症状**：生成的XML无法正确解析

**解决方案**：
1. 重新生成图表
2. 检查AI响应内容
3. 尝试更简单的描述
4. 手动修正XML格式

### 浏览器兼容性问题

**推荐浏览器**：
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

**已知问题**：
- IE浏览器不完全支持
- 部分移动浏览器可能存在兼容性问题

### 性能优化建议

1. **关闭不必要的标签页**
2. **定期清理浏览器缓存**
3. **使用最新版本的浏览器**
4. **避免同时处理大型图表**

---

如果以上指南无法解决你的问题，请：
1. 查看 [GitHub Issues](https://github.com/silenceallat/AIPrompt2Draw/issues)
2. 提交新的问题报告
3. 联系技术支持